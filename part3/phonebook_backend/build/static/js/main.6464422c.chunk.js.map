{"version":3,"sources":["Components/PersonsList.js","Components/Filter.js","Components/PersonForm.js","Components/Notification.js","services/personsServices.js","Components/App.js","index.js"],"names":["PersonsList","filteredPersons","handleDeleteBtn","map","person","key","name","number","onClick","id","Filter","value","onChange","PersonForm","onSubmit","onNameChange","onNumberChange","type","Notification","message","isError","className","baseUrl","axios","get","then","response","data","newObject","post","put","delete","App","useState","persons","setPersons","setName","setNumber","filter","setFilter","notification","setNotification","errorMessage","setErrorMessage","useEffect","personsServices","initialPersons","showNotification","personName","text","setTimeout","showErrorMessage","validateName","trimedName","trim","test","length","window","alert","validateNumber","trimedNumber","toLowerCase","includes","event","target","preventDefault","confirm","origPerson","find","p","updatedPerson","personToSet","catch","error","updatePerson","addedPerson","concat","personToDel","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.6464422c.chunk.js","sourcesContent":["import React from 'react'\n\nconst PersonsList = ({ filteredPersons, handleDeleteBtn }) => {\n    return(\n        <div>\n            {filteredPersons.map(person =>\n            <div key={person.name}>\n                {person.name} {person.number}\n                <button onClick={() => handleDeleteBtn(person.id)}> delete </button>\n            </div>\n            )}\n        </div>  \n    )\n}\n\nexport default PersonsList","import React from 'react'\n\nconst Filter = ({ value, onChange }) => {\n    return(\n        <div>filter shown with <input value={value} \n        onChange={onChange} />\n        </div>\n    )\n}\n\nexport default Filter","import React from 'react'\n\nconst PersonForm =({ onSubmit, name, onNameChange, number, onNumberChange }) => {\n\n  \n    return(\n      <form onSubmit={onSubmit}>\n      <div>\n        <div>name: <input name={name} onChange={onNameChange} /></div>\n        <div>Number: <input number={number} onChange={onNumberChange} /></div>\n      </div>\n      <button type=\"submit\"> add</button>\n    </form>\n    )\n}\n\nexport default PersonForm","import React from 'react'\n\nconst Notification = ({ message, isError }) => {\n\n    const type = isError ? \"error\" : \"notification\"\n    return(\n        <div className={type}>\n            {message}\n        </div>\n    )\n}\n\nexport default Notification","import axios from 'axios'\nconst baseUrl = 'api/persons'\n\nconst getAll = () => {\n  const request = axios.get(baseUrl)\n  return request.then(response => response.data)\n}\n\nconst create = newObject => {\n  const request = axios.post(baseUrl, newObject)\n  return request.then(response => response.data)\n}\n\nconst update = (id, newObject) => {\n  const request = axios.put(`${baseUrl}/${id}`, newObject)\n  return request.then(response => response.data)\n}\n\nconst remove = (id) => {\n  const request = axios.delete(`${baseUrl}/${id}`)\n  return request.then(response => response.data)\n}\n\nexport default { \n  getAll: getAll, \n  create: create, \n  update: update,\n  remove: remove \n}","import React, { useState, useEffect } from 'react'\n\nimport PersonsList from './PersonsList'\nimport Filter from './Filter'\nimport PersonForm from './PersonForm'\nimport Notification from './Notification'\n\nimport personsServices from '../services/personsServices'\n\n\nconst App = () => {\n\n  const [persons, setPersons] = useState([])\n  const [ name, setName ] = useState(\"\")\n  const [ number, setNumber ] = useState(\"\")\n  const [ filter, setFilter ] = useState(\"\")\n  const [notification, setNotification] = useState(null);\n  const [errorMessage, setErrorMessage] = useState(null);\n\n  const getAllPersons = () => {\n    personsServices\n      .getAll()\n      .then(initialPersons => {\n        setPersons(initialPersons)\n      })\n  }\n\n  useEffect(getAllPersons, [])\n    \n  const updatePerson = (origPerson) => {\n    const updatedPerson = { ...origPerson, number: number }\n    personsServices\n      .update(updatedPerson.id, updatedPerson)\n        .then(personToSet => {\n          setPersons(persons.map(person => person.id !== origPerson.id ? person : personToSet))\n        })\n        .catch(error => {\n          showErrorMessage(`Contact '${origPerson.name}' was already deleted`)\n          setPersons(persons.filter(p => p.id !== origPerson.id))\n        })\n  }\n\n  const addPerson = (event) => {\n    event.preventDefault()\n    if(persons.map(person => person.name).includes(name) && validateName() && validateNumber()) { //update person\n        if (window.confirm(`${name} is already added to phonebook, replace old number with a new one?`)) {\n          const origPerson = persons.find(p => p.name === name)\n          updatePerson(origPerson)\n          showNotification(origPerson.name, 'updated')\n        }\n    }else {//add new person\n      if (validateName() && validateNumber() ) {\n        const personObj = {name, number}\n        personsServices\n        .create(personObj)\n        .then(addedPerson => {\n          setPersons(persons.concat(addedPerson))\n          showNotification(name, 'added')\n        })\n        .catch(error => {\n          showErrorMessage(error.response.data.error)\n        })\n      }\n    }\n    setName('')\n    setNumber('')\n  }\n\n  const handleDeleteBtn = (id) => {\n    const personToDel = persons.find(person => person.id === id)\n    if (window.confirm(`Delete ${personToDel.name}?`)){\n      personsServices\n        .remove(id)\n        .then(() => { setPersons(persons.filter(person => \n          person.id !== id))\n          showNotification(personToDel.name, 'deleted')\n        })\n        .catch(error => {\n          showErrorMessage(`Contact ${personToDel.name} was already deleted`)\n          setPersons(persons.filter(p => p.id !== id))\n      })\n    }\n\n  }\n\n  const showNotification = (personName, text) => {//text = updated or deleted or added\n    setNotification(\n      `Contact '${personName}' has ${text}`\n    )\n    setTimeout(() => {\n      setNotification(null)\n    }, 5000)\n  }\n\n  const showErrorMessage = (message) => {\n    setErrorMessage(\n      message\n    )\n    setTimeout(() => {\n      setErrorMessage(null)\n    }, 5000)\n  }\n\n  const validateName = () => {\n    const reg = /^[a-zA-Z ]*$/\n    const trimedName = name.trim()\n    if (!reg.test(trimedName) || trimedName === '' || trimedName.length < 2) {\n      window.alert(`\"${name}\" is not a valid name`)\n      return false;\n   }\n    return true;\n  }\n\n  const validateNumber = () => {\n    const reg = /^[0-9]*$/\n    const trimedNumber = number.trim()\n    if (!reg.test(trimedNumber) || trimedNumber === '' || trimedNumber.length < 4) {\n      window.alert(`\"${number}\" is not a valid number`)\n      return false;\n   }\n    return true;\n  }\n\n  const handleNameChange = (event) => {\n    setName(event.target.value)\n  }\n\n  const handleNumberChange = (event) => {\n    setNumber(event.target.value)\n  }\n\n  const handleFilterChange = (event) => {\n    setFilter(event.target.value)\n  }\n\n  const filteredPersons =  filter === '' ? persons : persons.filter(person =>\n    person.name.toLowerCase().includes(filter.toLowerCase()))\n\n\n  return (\n    <div>\n      <h1>Phonebook</h1>\n      {errorMessage ? \n      <Notification message={errorMessage} isError={true} /> : null}\n      {notification ?\n      <Notification message={notification} isError={false} /> : null }\n      <Filter value={filter} onChange={handleFilterChange} />\n      <h2>Add a new contact</h2>\n      <PersonForm onSubmit={addPerson} name={name} onNameChange={handleNameChange}\n      number={number} onNumberChange={handleNumberChange} />\n      <h2>Contacts</h2>\n      <PersonsList filteredPersons={filteredPersons} handleDeleteBtn={handleDeleteBtn} />\n        \n    </div>\n  )\n}\n\n\nexport default App","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport App from './Components/App.js'\nimport './index.css'\n\n\n\nReactDOM.render(<App />, document.getElementById('root'))"],"sourceRoot":""}